"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[799],{8290:(a,o,e)=>{e.d(o,{ic:()=>p,lt:()=>u,sO:()=>d,uw:()=>i,yd:()=>g,zQ:()=>c});var r=e(737),n=e(546),t=e(1271);const l=(0,n.rJ)(r.db,"planosDeEnsino"),s=()=>r.j2.currentUser,i=async a=>{const o=s();if(!o)throw new Error("Usuário não autenticado.");const e=(0,n.H9)(l,`${o.uid}_${Date.now()}`);return await(0,n.BN)(e,{...a,userId:o.uid}),e.id},c=async()=>{const a=s();if(!a)throw new Error("Usuário não autenticado.");const o=await(0,n.GG)(l);return o.docs.filter((o=>o.data().userId===a.uid)).map((a=>({id:a.id,...a.data()})))},d=async(a,o)=>{const e=s();if(!e)throw new Error("Usuário não autenticado.");const r=(0,n.H9)(l,a);await(0,n.mZ)(r,o)},u=async a=>{const o=s();if(!o)throw new Error("Usuário não autenticado.");const e=(0,n.H9)(l,a);await(0,n.kd)(e)},p=async()=>{try{const a=(0,n.rJ)(r.db,"planosDeEnsino"),o=(0,n.P)(a,(0,n._M)("publico","==",!0)),e=await(0,n.GG)(o),t=await Promise.all(e.docs.map((async a=>{const o=a.data(),e=o.userId||null;let t="Desconhecido";if(e){const a=(0,n.H9)(r.db,"users",e),o=await(0,n.x7)(a);o.exists()&&(t=o.data().name||"Usuário")}return{id:a.id,...o,autor:t}})));return t}catch(a){throw console.error("Erro ao carregar planos públicos:",a),new Error("Erro ao carregar planos públicos.")}},g=async a=>{try{const o=(0,n.H9)(r.db,"planosDeEnsino",a),e=await(0,n.x7)(o);if(!e.exists())throw console.error("Plano não encontrado:",a),new Error("Plano não encontrado.");const l={id:e.id,...e.data()};return console.log("Plano encontrado:",l),t.A.set("aulaTeorica",l.dados),t.A.set("planoCarregado",l.nome),l}catch(o){throw console.error("Erro ao carregar plano:",o),o}}},737:(a,o,e)=>{e.d(o,{db:()=>c,j2:()=>d});var r=e(322),n=e(546),t=e(5956),l=e(1271);const s={apiKey:"AIzaSyDA7T1Fg6CSR1WJHpOeNdaRYuWKtyBA7GU",authDomain:"app-ebl.firebaseapp.com",projectId:"app-ebl",storageBucket:"app-ebl.appspot.com",messagingSenderId:"664304698050",appId:"1:664304698050:web:fd9d886cf317cca6d5f15b"},i=(0,r.Wp)(s),c=(0,n.aU)(i),d=(0,t.xI)(i);(0,t.hg)(d,(a=>{a?l.A.set("user",a):l.A.remove("user")}))},5799:(a,o,e)=>{e.r(o),e.d(o,{default:()=>j});var r=e(1758),n=e(8790);const t={class:"row justify-between items-center q-mb-md"},l=(0,r.Lk)("div",{class:"text-h6"},"Galeria de Planos de Aula",-1),s={class:"row items-center q-gutter-sm"},i=(0,r.Lk)("div",{class:"text-subtitle2"},"Ordenar por:",-1),c={class:"text-h6"},d={class:"text-caption text-grey"},u={class:"text-caption text-primary"},p=(0,r.Lk)("strong",null,"Autor:",-1),g={key:1,class:"q-mt-md text-center"},m=(0,r.Lk)("p",null,"Carregando planos...",-1),w={class:"q-mt-md row justify-center"};function b(a,o,e,b,v,f){const y=(0,r.g2)("q-icon"),k=(0,r.g2)("q-input"),h=(0,r.g2)("q-btn-toggle"),A=(0,r.g2)("q-card-section"),P=(0,r.g2)("q-btn"),q=(0,r.g2)("q-card-actions"),x=(0,r.g2)("q-card"),C=(0,r.g2)("q-table"),E=(0,r.g2)("q-spinner"),L=(0,r.g2)("q-pagination"),U=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(U,{padding:""},{default:(0,r.k6)((()=>[(0,r.bF)(x,{class:"q-pa-md"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",t,[l,(0,r.bF)(k,{modelValue:b.filtro,"onUpdate:modelValue":o[0]||(o[0]=a=>b.filtro=a),label:"Pesquisar plano",dense:"",filled:"",class:"q-mb-md",style:{"max-width":"300px"}},{append:(0,r.k6)((()=>[(0,r.bF)(y,{name:"search"})])),_:1},8,["modelValue"])]),b.loading?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.bF)(E,{size:"40px",color:"primary"}),m])):((0,r.uX)(),(0,r.Wv)(C,{key:0,rows:b.planosFiltrados,columns:b.colunas,"row-key":"id",pagination:b.paginacao,"onUpdate:pagination":o[2]||(o[2]=a=>b.paginacao=a),"rows-per-page-options":[5,10,20],grid:"","hide-bottom":"","onUpdate:sort":b.ordenarPlanos},{top:(0,r.k6)((()=>[(0,r.Lk)("div",s,[i,(0,r.bF)(h,{modelValue:b.criterioOrdenacao,"onUpdate:modelValue":[o[1]||(o[1]=a=>b.criterioOrdenacao=a),b.ordenarPlanos],push:"","toggle-color":"primary",options:[{label:"Nome",value:"nome"},{label:"Autor",value:"autor"}]},null,8,["modelValue","onUpdate:modelValue"])])])),item:(0,r.k6)((a=>[(0,r.bF)(x,{class:"q-ma-sm",style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(A,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",c,(0,n.v_)(a.row.nome),1),(0,r.Lk)("div",d,(0,n.v_)(a.row.descricao),1),(0,r.Lk)("div",u,[p,(0,r.eW)(" "+(0,n.v_)(a.row.autor),1)])])),_:2},1024),(0,r.bF)(q,{align:"right"},{default:(0,r.k6)((()=>[(0,r.bF)(P,{color:"primary",icon:"cloud_download",label:"Carregar Plano",unelevated:"",class:"col-12 col-sm-auto",onClick:o=>b.carregarPlanoAula(a.row.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["rows","columns","pagination","onUpdate:sort"])),(0,r.Lk)("div",w,[(0,r.bF)(L,{modelValue:b.paginacao.page,"onUpdate:modelValue":[o[3]||(o[3]=a=>b.paginacao.page=a),b.atualizarPagina],max:b.totalPaginas,"max-pages":5,"direction-links":"","boundary-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])])),_:1})])),_:1})}e(4748);var v=e(8734),f=e(8290),y=e(455),k=e(4907);const h={setup(){const a=(0,k.A)(),o=(0,y.rd)(),e=(0,v.KR)([]),n=(0,v.KR)(!0),t=(0,v.KR)(""),l=(0,v.KR)("nome"),s=(0,v.KR)({page:1,rowsPerPage:5}),i=[{name:"nome",label:"Nome do Plano",field:"nome",align:"left",sortable:!0},{name:"descricao",label:"Descrição",field:"descricao",align:"left",sortable:!1},{name:"autor",label:"Autor",field:"autor",align:"left",sortable:!0}],c=async()=>{n.value=!0;try{const a=await(0,f.ic)();e.value=a||[],g()}catch(o){console.error(o),e.value=[],a.notify({message:"Erro ao carregar planos.",color:"negative"})}finally{n.value=!1}},d=(0,r.EW)((()=>{let a=[...e.value];return t.value&&(a=a.filter((a=>a.nome.toLowerCase().includes(t.value.toLowerCase())))),a})),u=(0,r.EW)((()=>Math.ceil(d.value.length/s.value.rowsPerPage))),p=a=>{s.value.page=a},g=()=>{e.value.sort(((a,o)=>a[l.value].toLowerCase()<o[l.value].toLowerCase()?-1:a[l.value].toLowerCase()>o[l.value].toLowerCase()?1:0))},m=async e=>{try{await(0,f.yd)(e),o.push({name:"tutorial"})}catch(r){console.error(r),a.notify({message:"Erro ao carregar plano.",color:"negative",icon:"error"})}};return(0,r.sV)(c),{planosFiltrados:d,colunas:i,paginacao:s,totalPaginas:u,loading:n,filtro:t,criterioOrdenacao:l,carregarPlanoAula:m,atualizarPagina:p,ordenarPlanos:g}}};var A=e(2807),P=e(7716),q=e(3316),x=e(9270),C=e(492),E=e(6653),L=e(6939),U=e(4189),_=e(2669),F=e(6384),Q=e(564),V=e(4700),I=e(8582),D=e.n(I);const W=(0,A.A)(h,[["render",b]]),j=W;D()(h,"components",{QPage:P.A,QCard:q.A,QInput:x.A,QIcon:C.A,QTable:E.A,QBtnToggle:L.A,QCardSection:U.A,QCardActions:_.A,QBtn:F.A,QSpinner:Q.A,QPagination:V.A})}}]);