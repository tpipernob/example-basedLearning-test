"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[890],{737:(e,a,l)=>{l.d(a,{db:()=>n,j2:()=>d});var o=l(322),s=l(546),r=l(5956),t=l(1271);const u={apiKey:"AIzaSyDA7T1Fg6CSR1WJHpOeNdaRYuWKtyBA7GU",authDomain:"app-ebl.firebaseapp.com",projectId:"app-ebl",storageBucket:"app-ebl.appspot.com",messagingSenderId:"664304698050",appId:"1:664304698050:web:fd9d886cf317cca6d5f15b"},i=(0,o.Wp)(u),n=(0,s.aU)(i),d=(0,r.xI)(i);(0,r.hg)(d,(e=>{e?t.A.set("user",e):t.A.remove("user")}))},1890:(e,a,l)=>{l.r(a),l.d(a,{default:()=>E});var o=l(1758),s=l(9104);const r=(0,o.Lk)("div",{class:"text-h6"},"Editar Perfil",-1),t={key:0,class:"q-mt-md text-center"},u=(0,o.Lk)("p",null,"Carregando perfil...",-1),i={key:1,class:"q-mt-md"},n={class:"row q-col-gutter-md"},d={class:"col-12"},c={class:"col-12"},m={class:"col-12"},p={class:"q-mt-md q-gutter-sm row"};function b(e,a,l,b,v,g){const f=(0,o.g2)("q-spinner"),k=(0,o.g2)("q-input"),y=(0,o.g2)("q-btn"),A=(0,o.g2)("q-form"),q=(0,o.g2)("q-card"),h=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(h,{padding:""},{default:(0,o.k6)((()=>[(0,o.bF)(q,{class:"q-pa-md"},{default:(0,o.k6)((()=>[r,b.loading?((0,o.uX)(),(0,o.CE)("div",t,[(0,o.bF)(f,{size:"40px",color:"primary"}),u])):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(A,{onSubmit:(0,s.D$)(b.updateProfile,["prevent"])},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.Lk)("div",d,[(0,o.bF)(k,{modelValue:b.name,"onUpdate:modelValue":a[0]||(a[0]=e=>b.name=e),label:"Nome",outlined:"",dense:""},null,8,["modelValue"])]),(0,o.Lk)("div",c,[(0,o.bF)(k,{modelValue:b.email,"onUpdate:modelValue":a[1]||(a[1]=e=>b.email=e),label:"E-mail",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),(0,o.Lk)("div",m,[(0,o.bF)(k,{modelValue:b.roleLabel,"onUpdate:modelValue":a[2]||(a[2]=e=>b.roleLabel=e),label:"Tipo de Usuário",outlined:"",dense:"",disable:""},null,8,["modelValue"])])]),(0,o.Lk)("div",p,[(0,o.bF)(y,{type:"submit",color:"primary",icon:"save",label:"Salvar Alterações",class:"col-xs-12 col-sm-auto"})])])),_:1},8,["onSubmit"])]))])),_:1})])),_:1})}var v=l(8734),g=l(737),f=l(546),k=l(5956),y=l(4907);const A={setup(){const e=(0,y.A)(),a=(0,v.KR)(""),l=(0,v.KR)(""),s=(0,v.KR)("user"),r=(0,v.KR)("Usuário"),t=(0,v.KR)(!0),u=async e=>{if(e){l.value=e.email;const o=(0,f.H9)(g.db,"users",e.uid),t=await(0,f.x7)(o);if(t.exists()){const l=t.data();a.value=l.name||e.displayName||"",s.value=l.role||"user",r.value="admin"===s.value?"Administrador":"Usuário"}else a.value=e.displayName||"Usuário",s.value="user",r.value="Usuário"}t.value=!1};(0,o.sV)((()=>{g.j2.onAuthStateChanged((e=>{e?u(e):t.value=!1}))}));const i=async()=>{try{const l=g.j2.currentUser;if(!l)throw new Error("Usuário não autenticado.");await(0,k.r7)(l,{displayName:a.value});const o=(0,f.H9)(g.db,"users",l.uid);await(0,f.mZ)(o,{name:a.value}),e.notify({message:"Perfil atualizado com sucesso!",color:"positive"})}catch(l){console.error("Erro ao atualizar perfil:",l),e.notify({message:"Erro ao atualizar perfil. Tente novamente.",color:"negative"})}};return{name:a,email:l,roleLabel:r,loading:t,updateProfile:i}}};var q=l(2807),h=l(7716),U=l(3316),w=l(564),L=l(9200),V=l(9270),F=l(6384),C=l(8582),S=l.n(C);const x=(0,q.A)(A,[["render",b]]),E=x;S()(A,"components",{QPage:h.A,QCard:U.A,QSpinner:w.A,QForm:L.A,QInput:V.A,QBtn:F.A})}}]);